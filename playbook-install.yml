---

- hosts: all
  tasks:
    - name: Install vim
      apt:
        name: vim
        state: present

- hosts: app
  tasks:
    - name: Install python setuptools
      apt:
        name: python-setuptools
        state: present
    - name: Install python pip
      apt:
        name: python-pip
        state: present
    - name: Install flask for python
      pip:
        name: flask
        state: present

- hosts: proxy
  tasks:
    - name: Install proxy
      apt:
        name: 
        state: 
    - name: Copy file proxy configuration 
      copy:
        src: source:haproxy.cft
        dest: /etc/haproxy/haproxy.cft
        owner: root
        group: root
        mode: '0644'

- hosts: db
  tasks:
    - name: Install postgresql
      apt:
        name: postgresql
        state: present
    - name: Install postgresql-client
      apt:
        name: postgresql-client
        state: present
